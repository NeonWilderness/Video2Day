!function(e){"use strict";e.fn.video2day=function(){var t=this,s={version:"0.9",defaults:{addFlexVideoClass:!1,position:"bottom"},vidFrame:'<iframe width="{w}" height="{h}" src={p} frameborder="0" allowfullscreen></iframe>',vidParam:{youtube:'"//www.youtube.com/embed/{v}"',vimeo:'"//player.vimeo.com/video/{v}"',vevo:'"http://cache.vevo.com/assets/html/embed.html?video={v}&autoplay=0"',giphy:'"//giphy.com/embed/{v}"',jsfiddle:'"//jsfiddle.net/{v}/embedded/{scope}/{color}/"',dailymotion:'"//www.dailymotion.com/embed/video/{v}"',putpat:'"http://www.putpat.tv/iframe/videos/{v}"',funnyordie:'"http://www.funnyordie.com/embed/{v}"',liveleak:'"http://www.liveleak.com/ll_embed?f={v}"',vine:'"https://vine.co/v/{v}/embed/simple"',metacafe:'"http://www.metacafe.com/embed/{v}/"',myvideo:'"http://www.myvideo.de/embed/{v}"'},errmsg:function(e){return'<p class="message">'+e+"</p>"},init:function(i){var a,r,o,d,l,n,c,h,m,p,v,u,w=e.extend({},s.defaults,i||{}),f=Object.keys(s.vidParam).concat("other");return t.each(function(){a=e(this),r="",o=a.parents(".storyContent").width()||0,d=a.parents().width(),0!==o&&d>o&&(d=o),c=16/9,h="",m=!1,p="jpg",v="js,html,css,result",u="dark";var t=a.attr("class").toLowerCase().split(/\s+/);if(e.each(t,function(){switch(this.substr(0,6)){case"width-":d=parseInt(this.substr(6,this.length-6),10);break;case"ratio-":c=parseFloat(this.substr(6,this.length-6));break;case"poster":m=!0;break;case"image-":p=this.substr(6,this.length-6);break;case"scope-":v=this.substr(6,this.length-6);break;case"color-":u=this.substr(6,this.length-6);break;default:f.indexOf(this)>=0&&(h=this)}}),l=Math.round(d/c),n=a.attr("id")||"",0===n.length)r=s.errmsg('Bitte die Video-ID bzw. -URL im Parameter "id" ergänzen!');else if(0===h.length)r=s.errmsg("Bitte "+f.join(", ")+' im class-Parameter "'+a.attr("class")+'" ergänzen!');else if("other"===h){var i=m?' poster="'+n.substr(0,n.lastIndexOf(".")+1)+p+'"':"";r='<video class="video-js vjs-default-skin" controls preload="auto" width="'+d+'" height="'+l+'" data-setup="{}"'+i+'><source src="'+n+'" type="video/mp4"></video>'}else r=s.vidFrame.replace(/{w}/gi,d).replace(/{h}/gi,l).replace(/{p}/gi,s.vidParam[h].replace(/{v}/gi,n)),"jsfiddle"===h&&(r=r.replace(/{scope}/gi,v).replace(/{color}/gi,u));w.addFlexVideoClass&&a.addClass("flex-video"),"top"===w.position.toLowerCase()?a.prepend(r):a.append(r)}),t}};return{init:s.init}}}(jQuery);