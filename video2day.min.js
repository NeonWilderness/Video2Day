(function(a){a.fn.video2day=function(){var c=this,b={version:"0.2",defaults:{addFlexVideoClass:true,wualaSourceURL:"http://www.wuala.com",wualaDirectURL:"http://content.wuala.com/contents"},vidParam:{youtube:'<iframe width="{w}" height="{h}" src="http://www.youtube.com/embed/{v}?fs=1" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',vimeo:'<iframe width="{w}" height="{h}" src="http://player.vimeo.com/video/{v}?byline=0&amp;portrait=0" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',vevo:'<object width="{w}" height="{h}"><param name="movie" value="http://videoplayer.vevo.com/embed/Embedded?videoId={v}&playlist=false&autoplay=0&playerId=&playerType=embedded&env=0&cultureName=de-DE&cultureIsRTL=False"></param><param name="wmode" value="transparent"></param><param name="bgcolor" value="#000000"></param><param name="allowFullScreen" value="true"></param><param name="allowScriptAccess" value="always"></param><embed src="http://videoplayer.vevo.com/embed/Embedded?videoId={v}&playlist=false&autoplay=0&playerId=&playerType=embedded&env=0&cultureName=de-DE&cultureIsRTL=False" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{w}" height="{h}" bgcolor="#000000" wmode="transparent"></embed></object>',bliptv:'<iframe width="{w}" height="{h}" src="http://blip.tv/play/{v}?p=1" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',dailymotion:'<iframe width="{w}" height="{h}" src="http://www.dailymotion.com/embed/video/{v}" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},init:function(j){var o=a.extend({},b.defaults,j||{}),h=Object.keys(b.vidParam).concat("other"),n,e,d,m,i,g,f,k,l;c.each(function(){n=a(this);e="";d=n.parents("div").width();g=16/9;f="";k=false;l="jpg";var p=n.attr("class").toLowerCase().split(/\s+/);a.each(p,function(r,s){switch(s.substr(0,6)){case"width-":d=parseInt(s.substr(6,s.length-6),10);break;case"ratio-":g=parseFloat(s.substr(6,s.length-6));break;case"poster":k=true;break;case"image-":l=s.substr(6,s.length-6);break;default:if(h.indexOf(s)>=0){f=s}}});m=Math.round(d/g);i=n.attr("id")||"";if(i.length===0){e='<p class="message">Bitte die Video-ID bzw. -URL im Parameter "id" ergänzen!</p>'}else{if(f.length===0){e='<p class="message">Bitte '+h.join(", ")+' im class-Parameter "'+n.attr("class")+'" ergänzen!</p>'}else{if(f==="other"){i=i.replace(o.wualaSourceURL,o.wualaDirectURL);var q=(k)?' poster="'+i.substr(0,i.lastIndexOf(".")+1)+l+'"':"";e='<video class="video-js vjs-default-skin" controls preload="auto" width="'+d+'" height="'+m+'" data-setup="{}"'+q+'><source src="'+i+'" type="video/mp4"></video>'}else{e=b.vidParam[f].replace(/{w}/gi,d).replace(/{h}/gi,m).replace(/{v}/gi,i)}}}if(o.addFlexVideoClass){if(!n.hasClass("flex-video")){n.addClass("flex-video")}}n.append(e)});return c}};return{init:b.init}}})(jQuery);